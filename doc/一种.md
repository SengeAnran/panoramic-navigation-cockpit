一种基于实例化的高性能关系型图谱球实现方法

摘要：
本发明涉及一种

技术领域：
本发明涉及前端三维中的webgl领域，尤其涉及一种基于力导图

发明内容
本发明的目的是为了解决现有的前端图谱球展示形式过于单一，对大批量数据计算渲染性能不足，页面展示卡顿的问题，提出了一种结合了力导图及实例化的图谱球绘制实现方法，包括以下步骤：
1. 构建数据节点关系，使用力导图初始化节点位置
2. 基于节点位置计算对应确定节点及连线位置所需的模型矩阵
3. 通过实例化数组将模型矩阵一次性传递至GPU，通过一个命令绘制出所有节点及连线
4. 逐周期重复2和3步骤，以支持图谱球的动画、拖拽及交互功能


以上各步骤具体方法如下
步骤1中，首先指定节点列表和关系节点链接列表，借助力导图引擎在工作线程中计算力导图节点位置，并通过消息机制通知主线程计算结果
步骤2中，对于节点位置其模型矩阵可以简单的对应为其平移矩阵，对于链接线的模型矩阵由平移、旋转和缩放矩阵组合计算得到，其中平移矩阵由起点位置决定，旋转矩阵由表示链接线方向的四元数决定，缩放矩阵由链接线起点和终点的距离决定，最终的模型对平移矩阵、旋转矩阵和缩放矩阵按从左到右的顺序相乘得到；
步骤3中，在基本的绘制几何图形的基础上，通过实例化数组，对每个节点或链接线图的实例设置或更新起模型矩阵，在每次顶点着色器在渲染一个新的实例时更新对应节点的模型矩阵属性
步骤4中，在力导图引擎计算线程中，定时更新节点位置，通过消息通道通知到主线程，主线程根据位置信息重复2和3步骤，在每个周期上绘制出对应的几何图形。

本发明的有益效果：
本发明在力导图基础上，提供高效的可视化方法来展示图谱球
